---
// src/components/Header.astro
const currentPath = Astro.url.pathname;
---

<header class="site-header">
  <div class="header-container">
    <a href="/" class="brand-logo">
      <img 
        src="/logo.webp" 
        alt="Logo Pizza" 
        class="logo-icon" 
        width="125" 
        height="125" 
      />
      <span class="brand-text">PIZZAS A TODO GAS</span>
    </a>

    <nav class="main-nav">
      <ul>
        <li>
          <a href="/" class={currentPath === "/" ? "active" : ""}>Inicio</a>
        </li>
        <li>
          <a href="/carta" class={currentPath === "/carta" ? "active" : ""}>Nuestra Carta</a>
        </li>
        <li><a href="/#local">El Local</a></li>
        <li><a href="/contacto">Contacto</a></li>
      </ul>
    </nav>

    <div class="header-actions">
      
      <a href="tel:+34654843625" class="action-btn btn-call">
        <span class="icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
        </span>
        <div class="btn-text">
          <span class="label">PIDE AHORA</span>
          <span class="number">654 84 36 25</span>
        </div>
      </a>

      <a href="https://www.google.com/maps/dir//41650+El+Saucejo,+Sevilla/@37.2645146,-5.5302346,15z/data=!4m8!4m7!1m0!1m5!1m1!1s0xd0d530f877bfbd1:0xfc2f1115f10a4f6!2m2!1d-5.0924655!2d37.0693307?entry=ttu&g_ep=EgoyMDI2MDEwNy4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener noreferrer" class="action-btn btn-location">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
        <span class="location-text">VER MAPA</span>
      </a>
      
      <button class="icon-btn menu-grid-btn" aria-label="Menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
    </div>
  </div>
</header>

<style>
  /* --- LAYOUT HEADER --- */
  .site-header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 100;
    padding: 10px 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  /* Contenedor fluido y ancho */
  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 96%;
    max-width: 1600px;
    margin: 0 auto;
    padding: 0 10px;
  }

  /* --- BRAND --- */
  .brand-logo {
    display: flex;
    align-items: center;
    gap: 15px;
    text-decoration: none;
    flex-shrink: 0;
  }

  .logo-icon {
    width: 125px;
    height: 125px;
    object-fit: contain;
    filter: drop-shadow(0 0 15px rgba(0,0,0,0.6));
    transition: transform 0.3s ease;
  }
  
  .brand-logo:hover .logo-icon {
    transform: rotate(-5deg) scale(1.05);
  }

  .brand-text {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--color-text-main);
    letter-spacing: 1px;
    text-transform: uppercase;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    white-space: nowrap;
  }

  /* --- NAV --- */
  .main-nav ul {
    display: flex;
    gap: 40px;
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .main-nav a {
    font-family: var(--font-heading);
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--color-stone-grey);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    transition: color 0.3s ease;
  }

  /* Hover y estado activo */
  .main-nav a:hover, 
  .main-nav a.active {
    color: var(--color-accent);
  }
  
  /* Subrayado animado para el estado activo */
  .main-nav a.active::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: var(--color-accent);
    box-shadow: 0 0 10px var(--color-accent);
  }

  /* --- ACTIONS & BUTTONS --- */
  .header-actions {
    display: flex;
    align-items: center;
    gap: 20px;
    flex-shrink: 0;
  }

  .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    font-family: var(--font-heading);
    text-transform: uppercase;
    cursor: pointer;
  }

  /* 1. ESTILO BOTÓN DE LLAMADA */
  .btn-call {
    background-color: var(--color-accent);
    color: #000;
    padding: 10px 24px;
    gap: 12px;
    clip-path: polygon(0 0, 100% 0, 100% 85%, 92% 100%, 0 100%);
    box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
  }

  .btn-call:hover {
    background-color: var(--color-accent-hover);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
  }

  .btn-call .icon-wrapper {
    background: rgba(0,0,0,0.1);
    padding: 6px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .btn-call .btn-text {
    display: flex;
    flex-direction: column;
    line-height: 1;
    align-items: flex-start;
  }

  .btn-call .label {
    font-size: 0.75rem;
    font-weight: 700;
    opacity: 0.8;
    margin-bottom: 2px;
  }

  .btn-call .number {
    font-size: 1.2rem;
    font-weight: 700;
    letter-spacing: 0.5px;
  }

  /* 2. ESTILO BOTÓN UBICACIÓN */
  .btn-location {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: var(--color-text-main);
    padding: 12px 20px;
    gap: 10px;
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 1px;
    border-radius: 4px;
  }

  .btn-location:hover {
    border-color: var(--color-accent);
    color: var(--color-accent);
    background: rgba(0,0,0,0.3);
  }

  /* MENÚ MÓVIL */
  .menu-grid-btn {
    display: none;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
  }

  /* --- RESPONSIVE --- */
  @media (max-width: 1200px) {
    .brand-text { font-size: 1.4rem; }
    .main-nav { display: none; }
    .menu-grid-btn { display: block; }
  }

  @media (max-width: 768px) {
    .header-container { width: 100%; padding: 0 15px; }
    .brand-text { display: none; }
    
    .logo-icon {
        width: 80px;
        height: 80px;
    }

    .btn-location { padding: 10px; }
    .btn-location .location-text { display: none; }
    
    .btn-call { padding: 8px 15px; }
    .btn-call .label { display: none; }
    .btn-call .number { font-size: 1rem; }
  }
</style>